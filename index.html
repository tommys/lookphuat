<!DOCTYPE html>
<html>
    <head>
        <title>LookPH UAT Web Send</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="container">
            <h1 class="text-center mt-3 mb-3">LookPH UAT Web Send</h1>
            <div class="card">
                <div class="card-header">Form</div>
                <div class="card-body">
                    <form method="POST" action="/notifications/push-notification" id="form">
                        <div class="list-group">
                            <label class="list-group-item">
                                <input class="form-check-input me-1" name="platform" type="checkbox" value="ios">
                                iOS
                            </label>
                            <label class="list-group-item">
                                <input class="form-check-input me-1" name="platform" type="checkbox" value="android">
                                Android
                            </label>
                        </div>         
                        <div class="mb-3">
                            <label>Title</label>
                            <input placeholder="Title" type="text" name="title" id="title" class="form-control" required/>
                        </div>
                        <div class="mb-3">
                            <label>Message</label>
                            <textarea placeholder="Message" name="message" id="message" class="form-control" required></textarea>
                        </div>
                        <div class="mb-3 w-100">
                            <input type="submit" name="submit_button" class="btn btn-primary" value="Send Push Notification" />
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </body>
    <script>
        (function() {
            const form = document.querySelector('#form');
            const checkboxes = form.querySelectorAll('input[type=checkbox]');
            const checkboxLength = checkboxes.length;
            const firstCheckbox = checkboxLength > 0 ? checkboxes[0] : null;
        
            function init() {
                if (firstCheckbox) {
                    for (let i = 0; i < checkboxLength; i++) {
                        checkboxes[i].addEventListener('change', checkValidity);
                    }
        
                    checkValidity();
                }
            }
        
            function isChecked() {
                for (let i = 0; i < checkboxLength; i++) {
                    if (checkboxes[i].checked) return true;
                }
        
                return false;
            }
        
            function checkValidity() {
                const errorMessage = !isChecked() ? 'At least one checkbox must be selected.' : '';
                firstCheckbox.setCustomValidity(errorMessage);
            }
        
            init();
        })();
    </script>
</html>